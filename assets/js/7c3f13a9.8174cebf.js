"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[582],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return b}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),p=m(n),c=r,b=p["".concat(l,".").concat(c)]||p[c]||d[c]||o;return n?a.createElement(b,i(i({ref:t},s),{},{components:n})):a.createElement(b,i({ref:t},s))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u[p]="string"==typeof e?e:r,i[1]=u;for(var m=2;m<o;m++)i[m]=n[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1498:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return o},metadata:function(){return u},toc:function(){return m}});var a=n(3117),r=(n(7294),n(3905));const o={sidebar_position:4},i="NumerBlox Integration",u={unversionedId:"tutorial-extras/numerblox",id:"tutorial-extras/numerblox",title:"NumerBlox Integration",description:"NumerBlox is a library that offers Numerai specific functionality, so you can worry less about software/data engineering and focus more on building great Numerai models.",source:"@site/docs/tutorial-extras/numerblox.md",sourceDirName:"tutorial-extras",slug:"/tutorial-extras/numerblox",permalink:"/docs/tutorial-extras/numerblox",draft:!1,editUrl:"https://github.com/councilofelders/numerbay/tree/master/docs/docs/tutorial-extras/numerblox.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Ensemble with NumerBay",permalink:"/docs/tutorial-extras/ensemble"},next:{title:"Changelog",permalink:"/docs/reference/CHANGELOG"}},l={},m=[{value:"NumerBay download with NumerFrame",id:"numerbay-download-with-numerframe",level:2},{value:"Numerai Classic",id:"numerai-classic",level:3},{value:"Numerai Signals",id:"numerai-signals",level:3},{value:"NumerBay submission",id:"numerbay-submission",level:2},{value:"Numerai Classic",id:"numerai-classic-1",level:3},{value:"Numerai Signals",id:"numerai-signals-1",level:3}],s={toc:m},p="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"numerblox-integration"},"NumerBlox Integration"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://crowdcent.github.io/numerblox/"},"NumerBlox")," is a library that offers Numerai specific functionality, so you can worry less about software/data engineering and focus more on building great Numerai models."),(0,r.kt)("p",null,"NumerBay provides basic integration with NumerBlox for downloading and submission of file artifacts."),(0,r.kt)("p",null,"A working example notebook for this tutorial is available at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/restrading/numerblox/blob/feature/numerbay-edu-nbs/nbs/edu_nbs/numerbay_integration.ipynb"},"https://github.com/restrading/numerblox/blob/feature/numerbay-edu-nbs/nbs/edu_nbs/numerbay_integration.ipynb")),(0,r.kt)("h2",{id:"numerbay-download-with-numerframe"},"NumerBay download with NumerFrame"),(0,r.kt)("p",null,"This part of the tutorial demonstrates how to use ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerFrame")," to download predictions bought on NumerBay community marketplace."),(0,r.kt)("h3",{id:"numerai-classic"},"Numerai Classic"),(0,r.kt)("p",null,"First, we download tournament data using ",(0,r.kt)("inlineCode",{parentName:"p"},"NumeraiClassicDownloader"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from numerblox.numerframe import create_numerframe, NumerFrame\nfrom numerblox.download import NumeraiClassicDownloader\nfrom numerblox.key import Key\nfrom numerblox.model import NumerBayCSVs\nfrom numerblox.submission import NumerBaySubmitter, NumeraiClassicSubmitter, NumeraiSignalsSubmitter\n\ndownloader = NumeraiClassicDownloader("numerframe_edu")\n# Path variables\ntournament_file = "numerai_tournament_data.parquet"\ntournament_save_path = f"{str(downloader.dir)}/{tournament_file}"\n# Download only tournament parquet file\ndownloader.download_single_dataset(tournament_file, dest_path=tournament_save_path)\n')),(0,r.kt)("p",null,"Loading in data and initializing a ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerFrame")," takes one line of code. It will automatically recognize the data format such as ",(0,r.kt)("inlineCode",{parentName:"p"},".csv")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".parquet"),". You have the option to add metadata, which is stored in the ",(0,r.kt)("inlineCode",{parentName:"p"},"meta")," attribute."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# Initialize NumerFrame from parquet file path\ndataf = create_numerframe(tournament_save_path, metadata={"version": 3, "type": "tournament"})\n')),(0,r.kt)("p",null,"Next, we create a NumerBayCSVs model object with a list of products we bought and NumerBay credentials. ",(0,r.kt)("inlineCode",{parentName:"p"},"numerbay_key_path")," may be required for products that use client-side encryption. You can learn more about encryption ",(0,r.kt)("a",{parentName:"p",href:"https://docs.numerbay.ai/updates/encryption"},"here")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'nb_model = NumerBayCSVs(data_directory=\'/app/notebooks/tmp\',\n                        numerbay_product_full_names=[\'numerai-predictions-numerbay\'],  # change to the full names of products you bought\n                        numerbay_username="your_username",  # change to your own username\n                        numerbay_password="your_password",  # change to your own password\n                        numerbay_key_path="/app/notebooks/tmp/numerbay.json")\n')),(0,r.kt)("p",null,"Call the ",(0,r.kt)("inlineCode",{parentName:"p"},"predict")," method on the ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerFrame")," to fetch the prediction file from NumerBay. If the file already exists in the ",(0,r.kt)("inlineCode",{parentName:"p"},"data_directory"),", that file will be loaded without re-downloading."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"preds = nb_model.predict(dataf)\n")),(0,r.kt)("p",null,"The predictions are concatenated to the ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerFrame")," with column name ",(0,r.kt)("inlineCode",{parentName:"p"},"prediction_numerai-predictions-numerbay"),"."),(0,r.kt)("p",null,"In this part of the tutorial we have downloaded a prediction file from NumerBay with ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerFrame"),". This makes things easier for post processing such as ensembling and neutralization."),(0,r.kt)("h3",{id:"numerai-signals"},"Numerai Signals"),(0,r.kt)("p",null,"Currently only the main tournament is supported. Signals support will be added in future."),(0,r.kt)("h2",{id:"numerbay-submission"},"NumerBay submission"),(0,r.kt)("p",null,"This part of the tutorial is for sellers who want to upload their predictions to NumerBay to fulfill sale orders. Using ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerBaySubmitter"),", a seller can choose to submit to both Numerai and NumerBay or just NumerBay."),(0,r.kt)("h3",{id:"numerai-classic-1"},"Numerai Classic"),(0,r.kt)("p",null,"Assume we have some prediction column to upload for the Numerai main tournament, in this case the ",(0,r.kt)("inlineCode",{parentName:"p"},"prediction")," column which simply takes the value of a feature."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'dataf = create_numerframe(tournament_save_path, metadata={"version": 3, "type": "tournament"})\ndataf[\'prediction\'] = dataf[\'feature_dichasial_hammier_spawner\']  # delete this line to use your own columns\n')),(0,r.kt)("p",null,"Next, we create a ",(0,r.kt)("inlineCode",{parentName:"p"},"NumerBaySubmitter")," object which wraps on top of a ",(0,r.kt)("inlineCode",{parentName:"p"},"NumeraiClassicSubmitter")," object that you would normally use if you are only submitting to Numerai."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"key = Key(pub_id='YOUR_PUBLIC_KEY', secret_key='YOUR_PRIVATE_KEY')  # change to your own Numerai API key\nnumerai_submitter = NumeraiClassicSubmitter(directory_path=\"/app/notebooks/tmp\", key=key)\n")),(0,r.kt)("p",null,"Set ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_to_numerai")," to True (default) if you want to submit to both Numerai and NumerBay, set to False to submit only to NumerBay."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'nb_submitter = NumerBaySubmitter(tournament_submitter=numerai_submitter, upload_to_numerai=True, numerbay_username="numerbay", numerbay_password="your_password")\n')),(0,r.kt)("p",null,"Finally, we call the ",(0,r.kt)("inlineCode",{parentName:"p"},"full_submission")," method to perform the submission"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"nb_submitter.full_submission(dataf, file_name='upload-full.csv', model_name='numerbay', numerbay_product_full_name='numerai-predictions-numerbay', cols='prediction')\n")),(0,r.kt)("h3",{id:"numerai-signals-1"},"Numerai Signals"),(0,r.kt)("p",null,"The process for Signals submission is very similar and is omitted for brevity, just do the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Use Signals NumerFrame"),(0,r.kt)("li",{parentName:"ul"},"Change ",(0,r.kt)("inlineCode",{parentName:"li"},"NumeraiClassicSubmitter")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"NumeraiSignalsSubmitter")," for the ",(0,r.kt)("inlineCode",{parentName:"li"},"tournament_submitter")," argument"),(0,r.kt)("li",{parentName:"ul"},"When calling ",(0,r.kt)("inlineCode",{parentName:"li"},"full_submission"),", change the ",(0,r.kt)("inlineCode",{parentName:"li"},"cols")," argument to the list of Signals column to submit (e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"['bloomberg_ticker', 'signal']"),")")))}d.isMDXComponent=!0}}]);