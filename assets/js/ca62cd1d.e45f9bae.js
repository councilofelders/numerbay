"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[565],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return y}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),d=a,y=u["".concat(c,".").concat(d)]||u[d]||h[d]||o;return n?r.createElement(y,i(i({ref:t},p),{},{components:n})):r.createElement(y,i({ref:t},p))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2462:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return l}});var r=n(3117),a=(n(7294),n(3905));const o={slug:"encryption-v2",title:"Encryption Update",authors:["restrading"],tags:["update"]},i=void 0,s={permalink:"/updates/encryption-v2",editUrl:"https://github.com/councilofelders/numerbay/tree/master/docs/updates/2022-09-24-encryption-v2.md",source:"@site/updates/2022-09-24-encryption-v2.md",title:"Encryption Update",description:"There's an update to NumerBay's encryption mechanism due to MetaMask deprecating some methods.",date:"2022-09-24T00:00:00.000Z",formattedDate:"September 24, 2022",tags:[{label:"update",permalink:"/updates/tags/update"}],readingTime:1.75,hasTruncateMarker:!1,authors:[{name:"ResTrading",title:"Maintainer of NumerBay",url:"https://github.com/restrading",imageURL:"https://github.com/restrading.png",key:"restrading"}],frontMatter:{slug:"encryption-v2",title:"Encryption Update",authors:["restrading"],tags:["update"]},prevItem:{title:"Daily Sales",permalink:"/updates/daily-sales"},nextItem:{title:"Client-side Encryption Release",permalink:"/updates/encryption"}},c={authorsImageUrls:[void 0]},l=[{value:"What&#39;s the impact",id:"whats-the-impact",level:2},{value:"Q&amp;A",id:"qa",level:2},{value:"I&#39;m an existing user, do I have to change my workflow due to this release?",id:"im-an-existing-user-do-i-have-to-change-my-workflow-due-to-this-release",level:3},{value:"When will this change become compulsory?",id:"when-will-this-change-become-compulsory",level:3},{value:"I use the NumerBay python client, do I need to change my code?",id:"i-use-the-numerbay-python-client-do-i-need-to-change-my-code",level:3},{value:"What&#39;s the change?",id:"whats-the-change",level:3}],p={toc:l},u="wrapper";function h(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"There's an update to NumerBay's encryption mechanism due to MetaMask deprecating some methods."),(0,a.kt)("h2",{id:"whats-the-impact"},"What's the impact"),(0,a.kt)("p",null,"Users are encouraged to generate a new key pair by clicking the ",(0,a.kt)("strong",{parentName:"p"},"Replace key pair")," in the ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://numerbay.ai/account"},"Edit profile page")),"."),(0,a.kt)("p",null,"This action is not compulsory at this point."),(0,a.kt)("p",null,"Apart from above, there is no change to user workflow."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"After generating a new key pair, you will lose access to all existing files encrypted with the old key. It is recommended to replace key pair only when you don't have active orders."),(0,a.kt)("p",{parentName:"admonition"},"If your workflow uses the exported key file, you need to export it again after replacing the keys.")),(0,a.kt)("h2",{id:"qa"},"Q&A"),(0,a.kt)("h3",{id:"im-an-existing-user-do-i-have-to-change-my-workflow-due-to-this-release"},"I'm an existing user, do I have to change my workflow due to this release?"),(0,a.kt)("p",null,"No, you don't have to change anything. Change of encryption key is optional at this point."),(0,a.kt)("h3",{id:"when-will-this-change-become-compulsory"},"When will this change become compulsory?"),(0,a.kt)("p",null,"When MetaMask announces the timeline for the removal of the deprecated methods, another update will be posted."),(0,a.kt)("h3",{id:"i-use-the-numerbay-python-client-do-i-need-to-change-my-code"},"I use the NumerBay python client, do I need to change my code?"),(0,a.kt)("p",null,"No, you don't need to change your code. This update is related to the change of storage encryption mechanism for the encryption key only and does not change how files are encrypted or decrypted."),(0,a.kt)("p",null,"However, if your code uses the exported key file for file decryption, you need to ",(0,a.kt)("strong",{parentName:"p"},"export it again")," after regenerating the key pair and replace the old key file in your repository."),(0,a.kt)("h3",{id:"whats-the-change"},"What's the change?"),(0,a.kt)("p",null,"The existing encryption mechanism (legacy mechanism) on NumerBay encrypts the generated encryption key with user's MetaMask wallet and stores the encrypted key on the server, and when need it is then decrypted using the MetaMask wallet.\nThis process involes MetaMask's ",(0,a.kt)("inlineCode",{parentName:"p"},"eth_getEncryptionPublicKey")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"eth_decrypt")," methods which have ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/MetaMask/metamask-extension/issues/15379"},"recently been deprecated"),"."),(0,a.kt)("p",null,"The new mechanism (encryption v2) instead encrypts the encryption key with a storage key derived from signature by having the user sign a random salt. This gets around the above two deprecated methods and may also enable support for some hardware wallets which don't allow direct access to their public keys."))}h.isMDXComponent=!0}}]);